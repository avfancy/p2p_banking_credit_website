$(function(){$("#regForm").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:12,message:"用户名长度必须在6~12位之间"}}},pwd:{message:"密码验证失败",validators:{notEmpty:{message:"密码不能为空"},stringLength:{min:6,max:12,message:"密码长度必须在6~12位之间"}}},repeatPwd:{message:"确认密码验证失败",validators:{notEmpty:{message:"确认密码不能为空"},stringLength:{min:6,max:12,message:"确认密码长度必须在6~12位之间"},identical:{field:"pwd",message:"两次密码输入不一致"}}},email:{message:"电子邮件验证失败",validators:{notEmpty:{message:"电子邮件不能为空"},emailAddress:{message:"电子邮件格式不正确"}}},tel:{message:"手机号码验证失败",validators:{notEmpty:{message:"手机号码不能为空"},regexp:{regexp:/^((1[358][0-9])|(14[57])|(17[0678])|(19[7]))\d{8}$/,message:"手机号码格式不正确"}}}}}).on("success.form.bv",function(e){e.preventDefault();var s=$(e.target),a=(s.data("bootstrapValidator"),s.serialize());$.post("./api/userAdd.php",a,function(e){e.isSuccess?(alert(e.msg),location.href="./login.php"):alert(e.msg)},"json")}),$("#loginForm").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:12,message:"用户名长度必须在6~12位之间"}}},pwd:{message:"密码验证失败",validators:{notEmpty:{message:"密码不能为空"},stringLength:{min:6,max:12,message:"密码长度必须在6~12位之间"}}}}}).on("success.form.bv",function(e){e.preventDefault();var s=$(e.target),a=(s.data("bootstrapValidator"),s.serialize());$.post("./api/userCheck.php",a,function(e){if(e.isSuccess){$("#msgShowTitle").text("登录成功"),$("#msgShowContent").html("<span class='glyphicon glyphicon-ok'></span>"+e.msg+",等待<span id='num'>3</span>秒后跳转到个人中心");var s=3,a=setInterval(function(){s--,$("#num").text(s),0==s&&(clearInterval(a),location.href="./personalCenter.php")},1e3)}else $("#msgShowTitle").text("登录失败"),$("#msgShowContent").html("<span class='glyphicon glyphicon-remove'></span>"+e.msg);$("#msgShowModal").modal("show")},"json")})});